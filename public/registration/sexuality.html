<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Select Your Interest</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <script type="module" src="/js/registration.js"></script>
    <style>
      /* Background */
      .pink-bg {
        background: url("bgimg.jpg") no-repeat center center/cover;
        font-family: "Poppins", sans-serif;
        min-height: 100vh;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .animate-float {
        animation: float 4s ease-in-out infinite;
        will-change: transform;
      }

      /* Gender Cards */
      .gender-option {
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 2.1px solid rgba(255, 255, 255, 0.4);
        background: rgba(255, 255, 255, 0.25);
        transition: all 0.3s ease;
        font-weight: 600;
        color: #2e2e2e;
      }
      .gender-option:hover {
        transform: scale(1.07);
        box-shadow: 0 0 20px rgba(255, 155, 180, 0.5);
      }
      .gender-option::before {
        opacity: 0;
      }
      .gender-option.active::before {
        opacity: 1;
      }

      /* Next Button Premium Style */
      .nex1-button {
        position: relative;
        width: 140px;
        padding: 12px 0;
        font-family: "Rufina", serif;
        font-size: 17px;
        color: black;
        background: linear-gradient(
          135deg,
          #f78998 0%,
          #fa97a9 100%,
          #f78998 100%
        );
        border-width: 0.13rem;
        border-style: solid;
        border-top-color: #ffffffcc;
        border-bottom-color: #ffffffcc;
        border-left-color: #fa97a9;
        border-right-color: #fa97a9;
        border-radius: 55px;
        box-shadow: 0px 36.86px 13.98px rgba(255, 106, 106, 0.02),
          0px 20.34px 12.71px rgba(255, 106, 106, 0.08),
          0px 8.9px 8.9px rgba(255, 106, 106, 0.13),
          0px 2.54px 5.08px rgba(255, 106, 106, 0.15);
        cursor: pointer;
        transition: 0.25s ease;
        overflow: hidden;
      }
      .nex1-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.35) 0%,
          rgba(255, 255, 255, 0) 40%,
          rgba(255, 255, 255, 0) 60%,
          rgba(255, 255, 255, 0.35) 100%
        );
        pointer-events: none;
        border-radius: 55px;
      }
      .nex1-button:hover {
        transform: translateY(-2px) scale(1.02);
        background: linear-gradient(
          135deg,
          #fff0f0 0%,
          #fa97a9 50%,
          #ffb2b2 100%
        );
      }

      .mbti-btnB {
        position: relative;
        background: radial-gradient(
            circle at 30% 100%,
            rgba(255, 255, 255, 0.55) 0%,
            rgba(255, 255, 255, 0.25) 35%,
            rgba(255, 182, 193, 0.18) 60%,
            rgba(255, 160, 180, 0.1) 80%,
            rgba(255, 150, 170, 0.05) 100%
          ),
          rgba(255, 192, 203, 0.25);
        border-radius: 1.2rem;
        color: #111;
        font-weight: 500;
        transition: all 0.25s ease-in-out;
        overflow: hidden;
        z-index: 1;
        box-shadow: inset 0 0 1px rgba(255, 255, 255, 0.6),
          inset 0 -1px 3px rgba(255, 255, 255, 0.4);
      }
      .mbti-btnB::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1.4px;
        background: linear-gradient(
          150deg,
          rgba(255, 255, 255, 0.9),
          rgba(255, 190, 210, 0.65)
        );
        -webkit-mask: linear-gradient(#fff 0 0) content-box,
          linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        z-index: -1;
      }
      .mbti-btnB:hover {
        transform: scale(1.06);
        box-shadow: 0 0 18px rgba(255, 180, 200, 0.85);
      }

      .title-font {
        font-family: "Rufina", serif;
        font-weight: 500;
      }
    </style>
  </head>

  <body class="pink-bg flex items-center justify-center relative">
    <div
      class="relative text-center px-4 sm:px-6 md:px-10 lg:px-16 w-full max-w-6xl z-10 animate-float"
    >
      <!-- Back Button -->
      <div class="text-left mt-4 sm:mt-6 md:mt-10 mb-6 sm:mb-8 md:mb-10">
        <button
          id="backBtn"
          class="mbti-btnB inline-flex items-center rounded-full font-medium transition-all duration-200 px-4 sm:px-6 py-2 sm:py-2.5 text-base sm:text-lg"
        >
          <i class="fa-solid fa-arrow-left mr-2 text-lg sm:text-xl"></i>
          <span class="font-serif leading-none">Back</span>
        </button>
      </div>

      <!-- Title -->
      <h1
        class="title-font text-2xl sm:text-3xl md:text-4xl text-gray-800 mt-6 sm:mt-10 mb-10 sm:mb-16 md:mb-20"
      >
        Select Your Interest
      </h1>

      <!-- Sexuality Options -->
      <div
        id="sexualityGroup"
        class="flex flex-wrap justify-center items-center gap-6 sm:gap-8 md:gap-10 mb-12 sm:mb-16 md:mb-20"
      >
        <button
          data-sexuality="male"
          class="gender-option flex flex-col items-center justify-center rounded-2xl w-[150px] sm:w-[190px] md:w-[210px] h-[130px] sm:h-[180px] md:h-[180px]"
        >
          <i class="fa-solid fa-mars text-3xl sm:text-5xl md:text-6xl mb-3"></i>
          <span class="font-bold text-base sm:text-lg md:text-xl">Male</span>
        </button>
        <button
          data-sexuality="female"
          class="gender-option flex flex-col items-center justify-center rounded-2xl w-[150px] sm:w-[190px] md:w-[210px] h-[130px] sm:h-[180px] md:h-[180px]"
        >
          <i
            class="fa-solid fa-venus text-3xl sm:text-5xl md:text-6xl mb-3"
          ></i>
          <span class="font-bold text-base sm:text-lg md:text-xl">Female</span>
        </button>
        <button
          data-sexuality="both"
          class="gender-option flex flex-col items-center justify-center rounded-2xl w-[150px] sm:w-[190px] md:w-[210px] h-[130px] sm:h-[180px] md:h-[180px]"
        >
          <i
            class="fa-solid fa-transgender-alt text-3xl sm:text-5xl md:text-6xl mb-3"
          ></i>
          <span class="font-bold text-base sm:text-lg md:text-xl">Both</span>
        </button>
      </div>

      <!-- Next Button -->
      <div class="flex justify-center items-center mt-4 sm:mt-8 md:mt-10">
        <button
          id="nextButton"
          class="nex1-button cursor-not-allowed opacity-80 border-2 border-white"
        >
          Next
        </button>
      </div>
    </div>

    <script>
      const sexualityButtons = document.querySelectorAll(".gender-option");
      const nextButton = document.getElementById("nextButton");
      let selectedSexuality = null;

      // PREFILL SUPPORT
      window.prefillPage = function (data) {
        if (!data || !data.sexuality) return;
        sexualityButtons.forEach((btn) => {
          if (btn.getAttribute("data-sexuality") === data.sexuality) {
            btn.click();
          }
        });
      };

      // COLLECT PAGE DATA
      window.collectPageData = function () {
        if (!selectedSexuality) return null;
        return { sexuality: selectedSexuality };
      };

      sexualityButtons.forEach((button) => {
        button.addEventListener("click", () => {
          sexualityButtons.forEach((btn) => {
            btn.classList.remove("active");
            btn.style.background = "rgba(255,255,255,0.25)";
            btn.style.color = "#2e2e2e";
            btn.style.boxShadow = "none";
          });

          selectedSexuality = button.getAttribute("data-sexuality");
          button.classList.add("active");
          button.style.background = "#fa627e";
          button.style.color = "white";
          button.style.boxShadow = "0 0 25px rgba(250, 98, 126, 0.6)";

          nextButton.classList.remove("bg-gray-300/60", "cursor-not-allowed");
          nextButton.classList.add(
            "bg-pink-500",
            "hover:bg-pink-600",
            "cursor-pointer",
            "text-white"
          );
        });
      });

      // TRIGGER REGISTRATION.JS SAVE
      nextButton.addEventListener("click", () => {
        if (!selectedSexuality) {
          alert("⚠️ Please select your interest before continuing!");
          return;
        }
        document.dispatchEvent(new CustomEvent("registration:submit"));
      });

      // BACK BUTTON
      document.getElementById("backBtn").addEventListener("click", () => {
        const pageStep = registrationSteps[getCurrentFilename()];
        goToStep(pageStep - 1, registrationSteps);
      });
    </script>
  </body>
</html>
