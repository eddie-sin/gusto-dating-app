<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Number</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Rufina:wght@400;700&family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome (working CDN) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <style>
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }
      .animate-float { animation: float 4s ease-in-out infinite; will-change: transform; }
      .scrollbar-none::-webkit-scrollbar { display: none; }
      .scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }
      .font-rufina { font-family: 'Rufina', serif; }
      .font-inter { font-family: 'Inter', sans-serif; }

      .mbti-btn {
  position: relative;
  background: radial-gradient(
      circle at 30% 100%,
      rgba(255, 255, 255, 0.55) 0%,
      rgba(255, 255, 255, 0.25) 35%,
      rgba(255, 182, 193, 0.18) 60%,
      rgba(255, 160, 180, 0.1) 80%,
      rgba(255, 150, 170, 0.05) 100%
    ),
    rgba(255, 192, 203, 0.25);
  border-radius: 1.2rem;
  color: #111;
  font-weight: 500;
  transition: all 0.25s ease-in-out;
  overflow: hidden;
  z-index: 1;
  box-shadow: inset 0 0 1px rgba(255, 255, 255, 0.6),
              inset 0 -1px 3px rgba(255, 255, 255, 0.4);
}

      /* Subtle glossy border */
  .mbti-btn::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1.4px;
  background: linear-gradient(
    150deg,
    rgba(255, 255, 255, 0.9),
    rgba(255, 190, 210, 0.65)
  );
  -webkit-mask: linear-gradient(#fff 0 0) content-box,
                linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  z-index: -1;
}

/* Hover effect */
.mbti-btn:hover {
  transform: scale(1.06);
  box-shadow: 0 0 18px rgba(255, 180, 200, 0.85);
}

    /* Standard next button */
    .next-btn { width:96px; padding:6px; font-family:'Rufina',serif; font-size:14px; color:black; background:linear-gradient(135deg,#F78998 0%,#fa97a9 50%,#F78998 100%); position:relative; overflow:hidden; border-width:0.11rem; border-style:solid; border-top-color:#ffffffcc; border-bottom-color:#ffffffcc; border-left-color:#fa97a9; border-right-color:#fa97a9; border-radius:55px; box-shadow:0px 36.86px 13.98px rgba(255,106,106,0.02),0px 20.34px 12.71px rgba(255,106,106,0.08),0px 8.9px 8.9px rgba(255,106,106,0.13),0px 2.54px 5.08px rgba(255,106,106,0.15); cursor:pointer; transition:0.25s ease; }
    .next-btn::before { content:""; position:absolute; top:0; left:0; height:100%; width:100%; background:linear-gradient(90deg,rgba(255,255,255,0.35) 0%,rgba(255,255,255,0) 40%,rgba(255,255,255,0) 60%,rgba(255,255,255,0.35) 100%); pointer-events:none; border-radius:55px; }
    .next-btn:hover { transform:translateY(-2px) scale(1.02); }
    
     
    .modal-content {
  width: min(720px, calc(100% - 32px));
  max-height: 35vh; /* <-- limit height to 80% of viewport */
  margin-top: 28px;
  border-radius: 12px;
  overflow: hidden;
  backdrop-filter: blur(10px);
  background: rgba(255,255,255,0.85);
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
}

/* Body scroll */
.modal-body {
  padding: 16px;
  overflow-y: auto;  /* <-- scroll vertically if content is too tall */
  flex: 1 1 auto;    /* take remaining space in modal */
}

#uploadGuidanceModal {
  display: none; /* hidden by default */
  position: fixed;
  inset: 0;
  justify-content: center;
  align-items: flex-start; /* top pop-up */
  z-index: 9999;
}

/* NEW: visible state */
#uploadGuidanceModal.open {
  display: flex;
  pointer-events: auto;
  animation: slideDown 260ms ease-out;
}

@keyframes slideDown {
  from { transform: translateY(-10px); opacity: 0; }
  to   { transform: translateY(0); opacity: 1; }
}

/* UPDATED modal content to be a top bar with responsive width */
.modal-content {
  width: min(720px, calc(100% - 32px));
  margin-top: 28px;    /* distance from viewport top */
  border-radius: 12px;
  overflow: hidden;
  backdrop-filter: blur(10px);
   background: rgba(255,255,255,0.85);
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

/* NEW: header bar (red/pink) */
.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: linear-gradient(90deg,#F78998,#fa97a9 60%);
  color: white;
}

/* NEW: header title */
.modal-header h2 {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
}

/* NEW: close button using Font Awesome */
.modal-close-button {
  background: transparent;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
  padding: 6px;
  border-radius: 6px;
}
.modal-close-button:focus { outline: 2px solid rgba(255,255,255,0.3); }

/* small-screen tweak */
@media (max-width:420px) {
  .modal-content { width: calc(100% - 16px); margin-top: 16px; }
  .modal-header h2 { font-size: 0.95rem; }
}


.info-icon {
  font-size: 20px;
  color: black;
  cursor: pointer;
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
}

.custom-leading {
  line-height: 1.6; /* adjust this value as needed */
}


    </style>
  </head>

  <body
    class="flex flex-col items-center justify-center min-h-screen bg-cover bg-center bg-no-repeat relative overflow-hidden px-4 sm:px-6"
    style="background-image: url('../../img/bgimg.jpg');"
  >

    <!-- Responsive Glassmorphism Card Wrapper -->
    <div class="relative w-[95%] sm:w-[85%] md:w-[75%] lg:w-[65%] xl:w-[55%] mt-24 sm:mt-28 md:mt-32">

      <!-- Back Button -->
<a href="sexuality.html"
   class="absolute -top-[110px] left-0 flex items-center justify-center mbti-btn
          w-[95px] sm:w-[105px] md:w-[115px] h-[40px] sm:h-[43px] md:h-[45px]
          px-4 sm:px-6 text-base sm:text-lg z-50"
>
    <i class="fa-solid fa-arrow-left mr-2 text-lg sm:text-xl"></i>
    <span class="font-serif leading-none"> Back</span>
</a>

      <!-- Glassmorphism Card -->
      <div
        class="relative bg-white/15 backdrop-blur-lg rounded-3xl p-8 sm:p-10 md:p-12 
               shadow-2xl border border-white/30 animate-float 
               h-auto min-h-[420px] sm:min-h-[460px] md:min-h-[500px] 
               flex flex-col text-center transition-all duration-500"
      >

      <span class="info-icon" onclick="openGuidanceModal()" role="button" aria-label="Upload guidance" title="Upload guidance">
  <i class="fa-solid fa-circle-exclamation" style="font-size:20px; color:black;"></i>
</span>

<!-- modal inner structure with a top-bar header + body -->
<div id="uploadGuidanceModal" aria-hidden="true" role="dialog" aria-labelledby="uploadGuidanceTitle">
  <div class="modal-content" role="document">
    <div class="modal-header">
      <h2 id="uploadGuidanceTitle" class="text-base sm:text-lg md:text-xl lg:text-2xl custom-leading">User guidance</h2>
      <!-- Font Awesome X icon (accessible button) -->
      <button class="modal-close-button" onclick="closeGuidanceModal()" aria-label="Close upload guidance">
        <i class="fa-solid fa-xmark" aria-hidden="true"></i>
      </button>
    </div>

    <div class="modal-body" style="padding:16px; text-align:left;">
      <div class="modal-body p-4 text-left font-inter font-normal">
        <!-- <p class="mb-4 text-sm sm:text-base md:text-lg lg:text-xl font-medium custom-leading">How to fill the data correctly:</p>
  
        <ul class="list-disc list-inside text-xs sm:text-sm md:text-base lg:text-lg mb-4 custom-leading">
          <li>For your phone number, please enter the number you currently use, starting with <strong>09</strong>.</li>

        </ul> -->

        <p class="mb-4 text-sm sm:text-base md:text-lg lg:text-xl font-medium custom-leading">
  ဒေတာကို မှန်ကန်စွာ ဖြည့်သွင်းရန် နည်းလမ်းများ
</p>

<ul class="list-disc list-inside text-xs sm:text-sm md:text-base lg:text-lg mb-4 custom-leading">
  <li>
    ဖုန်းနံပါတ်အတွက် လက်ရှိ သင်အသုံးပြုနေသော နံပါတ်ကို
    <strong>09</strong> ဖြင့် စ၍ ထည့်သွင်းပါ။
  </li>
</ul>

      </div>
    </div>
  </div>
</div>
 
        <h2 class="text-center text-2xl sm:text-3xl md:text-4xl font-bold mb-6 sm:mb-10 font-rufina">
          Contact Number
        </h2>

        

        <div class="flex flex-col sm:flex-row gap-4 sm:gap-6 items-start sm:items-center mb-8">
          <!-- Country Code Dropdown -->
          <div class="relative w-full sm:w-2/5">
            <label class="block text-black font-medium mb-1 ml-1 font-inter">Code</label>
            <button
              id="countryCodeBtn"
              class="w-full px-4 py-3 rounded-xl border-b-2 border-black/70 bg-transparent text-black text-base flex items-center justify-between transition-all duration-300 font-inter"
            >
              <span>+95</span>
              <i class="fas fa-chevron-down text-xs"></i>
            </button>

            <!-- Dropdown List -->
            <div
              id="countryCodeList"
              class="absolute left-0 top-full mt-2 hidden bg-pink-100/70 backdrop-blur-md rounded-xl w-full sm:w-[160%] z-50 shadow-2xl border border-pink-200 overflow-hidden"
            >
              <div class="p-3 border-b border-pink-200">
                <input
                  id="searchInput"
                  type="text"
                  placeholder="Search"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-pink-400 focus:outline-none bg-white/30 placeholder-gray-600 font-inter"
                />
              </div>
              <div id="countriesContainer" class="max-h-48 overflow-y-auto scrollbar-none text-sm font-inter"></div>
            </div>
          </div>

          <!-- Phone Input -->
          <div class="w-full sm:w-3/5">
            <label class="block text-black font-medium mb-1 ml-1 font-inter">Phone</label>
            <input
              id="phoneInput"
              type="text"
              placeholder="********"
              class="w-full px-4 py-3 rounded-xl border-b-2 border-black/70 bg-transparent text-black placeholder-gray-500 focus:outline-none font-inter"
            />
          </div>
        </div>

        <!-- Next Button -->
        <div class="flex justify-end mt-auto">
          <button id="nextBtn" class="next-btn">Next</button>
        </div>
      </div>
    </div>

    <script>
      const countryCodeBtn = document.getElementById("countryCodeBtn");
      const countryCodeList = document.getElementById("countryCodeList");
      const countriesContainer = document.getElementById("countriesContainer");
      const searchInput = document.getElementById("searchInput");
      const phoneInput = document.getElementById("phoneInput");

      phoneInput.addEventListener("input", () => {
        const value = phoneInput.value;
        if (/[^0-9]/.test(value)) {
          alert("Only numbers 0-9 are allowed!");
          phoneInput.value = value.replace(/[^0-9]/g, "");
        }
      });

      const countries = [
        { name: "Myanmar(Burma)", code: "+95" },
        { name: "United Kingdom", code: "+44" },
        { name: "United States", code: "+1" },
        { name: "Japan", code: "+81" },
        { name: "Albania", code: "+335" },
        { name: "Andorra", code: "+376" },
        { name: "Antarctica", code: "+672" },
      ];

      let isDropdownOpen = false;

      function renderCountries(list) {
        countriesContainer.innerHTML = "";
        list.forEach((c) => {
          const div = document.createElement("div");
          div.className =
            "flex justify-between items-center px-4 py-2 hover:bg-pink-500 cursor-pointer transition-all duration-300 text-black rounded-lg font-inter";
          div.innerHTML = `<span>${c.name}</span><span class="text-gray-700">${c.code}</span>`;
          div.addEventListener("click", (e) => {
            e.stopPropagation();
            countryCodeBtn.querySelector("span").textContent = c.code;
            closeDropdown();
          });
          countriesContainer.appendChild(div);
        });
      }

      function openDropdown() {
        countryCodeList.classList.remove("hidden");
        isDropdownOpen = true;
        setTimeout(() => searchInput.focus(), 100);
      }

      function closeDropdown() {
        countryCodeList.classList.add("hidden");
        isDropdownOpen = false;
        searchInput.value = "";
        renderCountries(countries);
      }

      function toggleDropdown() {
        isDropdownOpen ? closeDropdown() : openDropdown();
      }

      renderCountries(countries);

      countryCodeBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleDropdown();
      });

      searchInput.addEventListener("input", () => {
        const term = searchInput.value.toLowerCase();
        const filtered = countries.filter(
          (c) =>
            c.name.toLowerCase().includes(term) || c.code.includes(term)
        );
        renderCountries(filtered);
      });

      document.addEventListener("click", (e) => {
        if (
          isDropdownOpen &&
          !countryCodeList.contains(e.target) &&
          !countryCodeBtn.contains(e.target)
        )
          closeDropdown();
      });

      // Next button handler (now delegated to registration flow)
      document.getElementById("nextBtn").addEventListener("click", (e) => {
        e.preventDefault();
        document.dispatchEvent(new Event('registration:submit'));
      });

      // Registration hooks
      window.prefillPage = function(prefill) {
        const contact = prefill.contact ?? localStorage.getItem('contact');
        if (!contact) return;
        // try to split code and number
        const match = contact.match(/^(\+\d+)(\d+)$/);
        if (match) {
          countryCodeBtn.querySelector('span').textContent = match[1];
          phoneInput.value = match[2];
        } else {
          phoneInput.value = contact;
        }
      };

      window.collectPageData = function() {
        const code = countryCodeBtn.querySelector("span").textContent;
        const phone = phoneInput.value.trim();

        if (!phone) {
          alert("⚠️ Please enter your phone number.");
          return null;
        }

        if (phone.length < 7 || phone.length > 15) {
          alert("⚠️ Phone number must be between 7 and 15 digits.");
          return null;
        }

        const contact = code + phone;
        localStorage.setItem('contact', contact);
        return { contact };
      };

        function openGuidanceModal() {
  document.getElementById('uploadGuidanceModal').style.display = 'flex';
}
function closeGuidanceModal() {
  document.getElementById('uploadGuidanceModal').style.display = 'none';
}


    </script>
  <script type="module" src="/js/registration.js"></script>
  </body>
</html>
